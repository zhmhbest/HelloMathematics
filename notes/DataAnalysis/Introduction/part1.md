<link rel='stylesheet' href='../../../style/index.css'>
<script src='../../../style/index.js'></script>

# [绪论：Part1](../index.html)

[TOC]

## 分析流程

```flow
block1=>operation: 实际问题
block2=>operation: 数学模型
block3=>operation: 数值计算方法
block4=>operation: 程序设计
block5=>operation: 计算机计算求出结果

block1->block2->block3->block4->block5
```

## 误差

设数$x$是精确值$x^*$的一个近似值。

### 误差来源

- **模型误差**：无法避免，数值分析不研究。
- **观测误差**：无法避免，数值分析不研究。
- **截断误差（方法误差）**：人为主观采用某种近似方法造成。
- **舍入误差（计算误差）**：计算机只能存放浮点数近似值造成。

### 误差表示

||||
| - | - | - |
| **绝对误差**   | $e(x)$   | $$e = \vert{x^*-x}\vert$$ |
| **绝对误差限** | $ε(x)$   | $$\vert{x^*-x}\vert ≤ ε$$ |
| **相对误差**   | $e_r(x)$ | $$e_r = \left\vert{\dfrac{x^*-x}{x}}\right\vert$$ |
| **相对误差限** | $ε_r(x)$ | $$\left\vert{\dfrac{x^*-x}{x}}\right\vert ≤ ε_r$$ |

- 相对误差应为$\left|{\dfrac{x^*-x}{x^*}}\right|$，但在实际计算中，认为$x$是准确的，可将分母替换为$x$。

### 误差估计

由$f(x^*) - f(x) = f'(x)(x^*-x) + \dfrac{f''(ξ)}{2}(x^*-x)^2$，得

<span class='highlight'>$$ε[f(x)] ≈ |f'(x)|ε(x)|$$</span>

推理得

<span class='highlight'>$$ε[f(x_1,\cdots,x_n)] ≈ \sum_{k=1}^{n} \left| \dfrac{∂f}{∂x_k} \right| ε(x_k)$$</span>

### 运算性质

<div class='highlight'>

- $ε(x_1±x_2) = ε(x_1) + ε(x_2)$，（这里等式右边就是只有加号）
- $ε(x_1 ⋅ x_2) ≈ |x_1|ε(x_2) + |x_2|ε(x_1)$
- $ε\left(\dfrac{x_1}{x_2}\right) ≈ \dfrac{|x_1|ε(x_2) + |x_2|ε(x_1)}{|x_2|^2}$
- $ε_r(x_1 ⋅ x_2) = ε_r(x_1) + ε_r(x_2)$

</div>

#### 例1

设$x$和$y$的相对误差均为$e_r = 0.001$，则$x ⋅ y$的相对误差为多少。

- $e_r(x) = 0.001 < ε_r(x)$
- $e_r(y) = 0.001 < ε_r(y)$
- $e_r(xy) < ε_r(xy) = ε_r(x) + ε_r(y)$
- 故$e_r(x ⋅ y)$约为$0.002$

#### 例2

设$x$和$y$的绝对误差均为$e = 0.001$，则$x - y$的绝对误差为多少。

- $e(x) = 0.001 < ε(x)$
- $e(y) = 0.001 < ε(y)$
- $e(x-y) < ε(x-y) = ε(x) + ε(y)$
- 故$e(x - y)$约为$0.002$

#### 例3

设$x=1.24$是由精确值$x^*$经过四舍五入得到的近似值。

**问**

1. 绝对误差限$ε$是多少？
2. 相对误差限$ε_r$是多少？

**解**

- $1.235≤x^*<1.245$
- $⇒ ε=0.005$
- $⇒ ε_r=\dfrac{0.005}{1.24} ≈ 0.4%$

**结论**

<span class='highlight'>凡是由精确值经过四舍五入得到的近似值，其**绝对误差限**等于该近似值末位的半个单位。</span>

## 有效数字

<span class='highlight'>如果$x$的**绝对误差限**$e$是它的某一数位的半个单位（比如四舍五入这种情况），并且从$x$左起第一个非零数字到该数位共有$n$位，则称这$n$个数字为$x$的有效数字</span>。即$x$近似$x^*$时有$n$位有效数字。此外，我们认为精确值的有效数字有无穷多位。

### 标准浮点数

数$x$总可以写成
$$x=±0.a_1a_2{\dots}a_k×10^m$$

其中$a_1≠0$、$\{a_2, \cdots, a_k\}∈[0, 9]$，该形式即称为**标准浮点数**。

### 有效数字和绝对误差限

>[当且仅当等价于充要条件](https://www.zhihu.com/question/28594040/answer/125495014)

$x$作为$x^*$的近似值，具有$n$位有效数字，当且仅当
$$|x^*-x| = e ≤ \frac{1}{2}×10^{m-n}$$

- $m$：近似值$x$写成**标准浮点数**时的指数位置取值。
- $n$：近似值$x$的有效数字位数。

该方程反映了绝对误差$e$和有效位数$n$之间的关系。

### 有效数字和相对误差限

**求相对误差限**

若$x$有$n$位有效数字，则其相对误差限为：

$$ε_r = \frac{1}{2a_1}×10^{1-n}$$

- $a_1$：近似值$x$写成标准浮点数后，小数点后第一个非$0$数字。
- $n$：近似值$x$取得的有效数字位数。

**求有效数字**

若$x$的相对误差限满足：

$$ε_r = \frac{1}{2(a_1+1)}×10^{1-n}$$

则$x$至少有$n$位有效数字。

<!-- #### 例1

已知$π=3.1415926535897\cdots$，$x_i$是$π$的近似值。

$x_1=3.14159$

- $m=1$
- $e = |π-x| ≈ 0.265 × 10^{-5} ≤ \frac{1}{2}×10^{m-n} = \frac{1}{2}×10^{-5}$
- $x_1$有6位有效数字。

$x_2=3.142$

- $m=1$
- $e = |π-x| ≈ 0.407 × 10^{-3} < \frac{1}{2}×10^{m-n} = \frac{1}{2} × 10^{-3}$
- $x_2$有4位有效数字。

$x_3=3.1415$

- $m=1$
- $e = |π-x| ≈ 0.926 × 10^{-4} < \frac{1}{2}×10^{m-n} = \frac{1}{2} × 10^{-3}$
- $x_3$有4位有效数字。 -->

#### 例1

使$x^*=\sqrt{2}$的近似值的绝对误差$e$小于$10^{-5}$。

**问**

1. 应取几位有效数字$n$？
2. 近似值$x$的取值为多少？

**解**

- $\sqrt{2} = 1.414{\cdots} = 0.141{\cdots}×10^1 ⇒ m = 1$
- 令$|\sqrt{2} - x| ≤ \dfrac{1}{2}×10^{m-n} = \dfrac{1}{2}×10^{-5}$
- 得$n=6$，$x=1.41421$。

#### 例2

$x=0.0145\underline{8663}$为真值$x^*=0.0145\underline{1845}$的近似，则$x$的有效数字位数$n$为？

**解**

$x = 0.1458663 × 10^{-1} { \ \ \ ⇒ \ \ \ } m=-1$

$e = 0.00006418 = 0.6418 × 10^{-4} ≤ \dfrac{1}{2}×10^{m-n} =\dfrac{1}{2}×10^{-3}$

综上可得$n=2$

## 数值稳定性

即计算过程中，舍入误差不增长。

**数值计算若干原则**

1. 避免两个相近的数相减（会造成有效数字丢失）
2. 防止大数吃掉小数
3. 绝对值过小的数不宜做除数
4. 简化计算程序，减少计算次数
5. 选用数值稳定性好的算法

#### 例1

为减少舍入误差影响，应将$10-\sqrt{99}$改写为

$$\dfrac{10-\sqrt{99}}{1} × \dfrac{10+\sqrt{99}}{10+\sqrt{99}} = \dfrac{1}{10+\sqrt{99}}$$

#### 例2

递推公式$\begin{cases}
    y_0 = \sqrt{2}
\\  y_n = 10y_{n-1} - 1 & n = 1,2,\dots
\end{cases}$，如果取$y_0 = \sqrt{2} ≈ 1.41$作计算

（1）则计算到$y_{10}$时，误差为多少？
（2）计算公式数值稳定吗？

**解**

$\begin{array}{l}
    e_0 = \sqrt{2} - 1.41
\\  e_1 = 10e_0
\\  e_2 = 10e_1 = 10^2e_0
\\  \dots
\\  e_{10} = 10^{10}e_0 = 10^{10}(\sqrt{2} - 1.41)
\end{array}$

明显，随着迭代次数增加，误差越来越大，故计算公式是不稳定的。
