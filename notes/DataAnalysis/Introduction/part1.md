<link rel='stylesheet' href='../../../style/index.css'>
<script src='../../../style/index.js'></script>

# [绪论：Part1](../index.html)

[TOC]

## 分析流程

```flow
block1=>operation: 实际问题
block2=>operation: 数学模型
block3=>operation: 数值计算方法
block4=>operation: 程序设计
block5=>operation: 计算机计算求出结果

block1->block2->block3->block4->block5
```

## 误差

设数$x$是精确值$x^*$的一个近似值。

### 误差来源

- **模型误差**：无法避免，数值分析不研究。
- **观测误差**：无法避免，数值分析不研究。
- **截断误差（方法误差）**：人为主观采用某种近似方法造成。
- **舍入误差（计算误差）**：计算机只能存放浮点数近似值造成。

### 误差表示

||||
| - | - | - |
| **绝对误差**   | $e(x)$   | $$e = \vert{x^*-x}\vert$$ |
| **绝对误差限** | $ε(x)$   | $$\vert{x^*-x}\vert ≤ ε$$ |
| **相对误差**   | $e_r(x)$ | $$e_r = \left\vert{\dfrac{x^*-x}{x}}\right\vert$$ |
| **相对误差限** | $ε_r(x)$ | $$\left\vert{\dfrac{x^*-x}{x}}\right\vert ≤ ε_r$$ |

- 相对误差应为$\left|{\dfrac{x^*-x}{x^*}}\right|$，但在实际计算中，认为$x$是准确的，可将分母替换为$x$。

**性质**

- $ε_r(x_1 ⋅ x_2) = ε_r(x_1) + ε_r(x_2)$

<!-- 
**性质**

- $ε(x_1±x_2) = ε(x_1) + ε(x_2)$
- $ε(x_1x_2) = |x_1|ε(x_2) + |x_2|ε(x_1)$
- $ε(\dfrac{x_1}{x_2}) = \dfrac{|x_1|ε(x_2) + |x_2|ε(x_1)}{|x_2|^2}$

**误差估计**

由$f(x^*) - f(x) = f'(x)(x^*-x) + \dfrac{f''(ξ)}{2}(x^*-x)^2$，得$ε[f(x)] ≈ |f'(x)|ε(x)|$。

推理得

$$ε[f(x_1,\cdots,x_n)] ≈ \sum_{k=1}^{n} \left| \dfrac{∂f}{∂x_k} \right| ε(x_k)$$ -->

#### 例1

设$x$和$y$的相对误差均为$e_r = 0.001$，则$x ⋅ y$的相对误差为多少。

- $e_r(x) = 0.001 < ε_r(x)$
- $e_r(y) = 0.001 < ε_r(y)$
- $e_r(xy) < ε_r(xy)$
- $ε_r(xy) = ε_r(x) + ε_r(y) > 0.002$
- 故$e_r(x ⋅ y)$约为$0.002$

#### 例2

设$x=1.24$是由精确值$x^*$经过四舍五入得到的近似值。

**问**

1. 绝对误差限$ε$是多少？
2. 相对误差限$ε_r$是多少？

**解**

- $1.235≤x^*<1.245$
- $⇒ ε=0.005$
- $⇒ ε_r=\dfrac{0.005}{1.24} ≈ 0.4%$

**结论**

凡是由精确值经过四舍五入得到的近似值，其**绝对误差限**等于该近似值末位的半个单位。


## 有效数字

如果$x$的**绝对误差限**$e$是它的某一数位的半个单位，并且从$x$左起第一个非零数字到该数位共有$n$位，则称这$n$个数字为$x$的有效数字，即$x$近似$x^*$时有$n$位有效数字。此外，我们认为精确值的有效数字有无穷多位。

### 标准浮点数

数$x$总可以写成
$$x=±0.a_1a_2{\dots}a_k×10^m$$

其中$a_1≠0$、$a_k∈[0, 9]$，该形式即称为**标准浮点数**。

### 有效数字和绝对误差限

>[当且仅当等价于充要条件](https://www.zhihu.com/question/28594040/answer/125495014)

$x$作为$x^*$的近似值，具有$n$位有效数字，当且仅当：
$$|x^*-x| = |e| ≤ \frac{1}{2}×10^{m-n}$$

- $m$：近似值$x$写成**标准浮点数**时的指数位置取值。
- $n$：近似值$x$取得的有效数字位数。

该方程反映了绝对误差$e$和有效位数$n$之间的关系。

### 有效数字和相对误差限

**求相对误差限**

若$x$有$n$位有效数字，则其相对误差限为：

$$ε_r = \frac{1}{2a_1}×10^{1-n}$$

- $a_1$：近似值$x$写成标准浮点数后，小数点后第一个非$0$数字。
- $n$：近似值$x$取得的有效数字位数。

**求有效数字**

若$x$的相对误差限满足：

$$ε_r = \frac{1}{2(a_1+1)}×10^{1-n}$$

则$x$至少有$n$位有效数字。

#### 例1

已知$π=3.1415926535897\cdots$，$x_i$是$π$的近似值。

$x_1=3.14159$

- $m=1$
- $e = |π-x| ≈ 0.265 × 10^{-5} ≤ \frac{1}{2}×10^{m-n} = \frac{1}{2}×10^{-5}$
- $x_1$有6位有效数字。

$x_2=3.142$

- $m=1$
- $e = |π-x| ≈ 0.407 × 10^{-3} < \frac{1}{2}×10^{m-n} = \frac{1}{2} × 10^{-3}$
- $x_2$有4位有效数字。

$x_3=3.1415$

- $m=1$
- $e = |π-x| ≈ 0.926 × 10^{-4} < \frac{1}{2}×10^{m-n} = \frac{1}{2} × 10^{-3}$
- $x_3$有4位有效数字。

#### 例2

使$x^*=\sqrt{2}$的近似值的绝对误差$e$小于$10^{-5}$。

**问**

1. 应取几位有效数字$n$？
2. 近似值$x$的取值为多少？

**解**

- $\sqrt{2} = 1.414{\cdots} = 0.141{\cdots}×10^1 ⇒ m = 1$
- 令$|\sqrt{2} - x| ≤ \dfrac{1}{2}×10^{1-n} = \dfrac{1}{2}×10^{-5}$
- 得$n=6$，$x=1.41421$。

#### 例3

$x=0.01458663$为真值$0.01451845$得近似，则$x$有几位有效数字。

- $x = 0.1458663 × 10^{-1}$
- $e = 0.00006818\cdots ≈ 0.6818 × 10^{-4} ≤ \frac{1}{2}×10^{m-n} = \frac{1}{2}×10^{-3}$
- $n=2$

## 数值稳定性

**数值稳定性**，即，计算过程中，舍入误差不增长。

**数值计算若干原则**

1. 避免两个相近的数相减（会造成有效数字丢失）
2. 防止大数吃掉小数
3. 绝对值过小的数不宜做除数
4. 简化计算程序，减少计算次数
5. 选用数值稳定性好的算法

#### 例

为减少舍入误差影响，应将$10-\sqrt{99}$改写为：$\dfrac{1}{10+\sqrt{99}}$。
